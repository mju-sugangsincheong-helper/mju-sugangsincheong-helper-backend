spring:
  application:
    name: mju-sugangsincheong-helper

  # MySQL Database (Production)
  datasource:
    url: jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3306}/${DB_NAME:mju-sugangsincheong-helper-db}?useSSL=true&serverTimezone=Asia/Seoul&characterEncoding=UTF-8
    username: ${DB_USERNAME:devuser}
    password: ${DB_PASSWORD:devpassword}
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: ${DB_MAX_POOL_SIZE:100}
      minimum-idle: ${DB_MIN_IDLE:50}
      idle-timeout: ${DB_IDLE_TIMEOUT:300000}
      connection-timeout: ${DB_CONNECTION_TIMEOUT:20000}

  # JPA
  jpa:
    hibernate:
      ddl-auto: ${JPA_DDL_AUTO:validate}
    show-sql: ${JPA_SHOW_SQL:false}
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect
    open-in-view: ${JPA_OPEN_IN_VIEW:false}

  # Redis (Production)
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      # password: ${REDIS_PASSWORD:}
      timeout: ${REDIS_TIMEOUT:6000ms}

# Server
server:
  port: ${SERVER_PORT:8080}
  servlet:
    context-path: ${SERVER_CONTEXT_PATH:/}

# Swagger/OpenAPI (Production - disabled)
springdoc:
  api-docs:
    enabled: ${SPRINGDOC_ENABLED:false}
  swagger-ui:
    enabled: ${SWAGGER_UI_ENABLED:false}

# Logging
logging:
  level:
    root: ${LOGGING_LEVEL_ROOT:WARN}
    kr.mmv.mjusugangsincheonghelper: ${LOGGING_LEVEL_APP:INFO}
  file:
    name: /app/logs/application.log
  logback:
    rollingpolicy:
      # max-file-size: 10MB               # 파일당 최대 용량
      max-history: 30                    # 보관 일수

# Actuator
management:
  endpoints:
    web:
      exposure:
        include: ${MANAGEMENT_EXPOSURE_INCLUDE:health}
  endpoint:
    health:
      show-details: ${MANAGEMENT_HEALTH_SHOW_DETAILS:never}

# ===================================
# 2. Application Custom Settings
# ===================================
app:
  jwt:
    secret: ${JWT_SECRET:ThisIsASecretKeyForJwtTokenGenerationThatMustBeAtLeast256BitsLongForHS256Algorithm}
    expiration: ${JWT_EXPIRATION:3600000}       # 1시간
    refresh-expiration: ${JWT_REFRESH_EXPIRATION:1209600000}    # 14일

  mju-univ-auth:
    base-url: ${MJU_UNIV_AUTH_BASE_URL:https://mju-univ-auth.shinnk.mmv.kr}
    timeout: ${MJU_UNIV_AUTH_TIMEOUT:30000}

  cache:
    default-ttl-seconds: ${CACHE_DEFAULT_TTL:60}
    stats-ttl-seconds: ${CACHE_STATS_TTL:19}
    ranking-ttl-seconds: ${CACHE_RANKING_TTL:30}
    departments-ttl-seconds: ${CACHE_DEPARTMENTS_TTL:3600}  # 1시간

  # 기능 플래그 설정 : aync 동작 활성화 비활성화
  section-sync:
    enabled: ${SECTION_SYNC_ENABLED:true}
  notification:
    enabled: ${NOTIFICATION_ENABLED:true}

  cors:
    allowed-origins: ${CORS_ALLOWED_ORIGINS:https://msh.mmv.kr}
